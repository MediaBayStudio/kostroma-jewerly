function _classCallCheck(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,a){for(var b,f=0;f<a.length;f++)b=a[f],b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(e,b.key,b)}function _createClass(d,a,b){return a&&_defineProperties(d.prototype,a),b&&_defineProperties(d,b),d}(function(){if("undefined"!=typeof window)try{var c=new window.CustomEvent("test",{cancelable:!0});if(c.preventDefault(),!0!==c.defaultPrevented)throw new Error("Could not prevent default")}catch(b){var d=function(e,a){var f,g;return a=a||{bubbles:!1,cancelable:!1,detail:void 0},f=document.createEvent("CustomEvent"),f.initCustomEvent(e,a.bubbles,a.cancelable,a.detail),g=f.preventDefault,f.preventDefault=function(){g.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(b){this.defaultPrevented=!0}},f};d.prototype=window.Event.prototype,window.CustomEvent=d}})(),function(b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():window.SimpleMenu=b()}(function(){function j(){e.removeChild(l.overlay.tag),l.overlay.tag.removeEventListener("animationend",j)}function k(h,a,b){var c;return function(){var d=this,e=arguments,f=b&&!c;clearTimeout(c),c=setTimeout(function(){c=null,b||h.apply(d,e)},a),f&&h.apply(d,e)}}var l,m,n,o=document.head,e=document.body,a=function(){function b(c){for(var a in _classCallCheck(this,b),l=this,l.defaults={menu:{selector:"",class:"active",animationDuration:.5,animationTimigFunc:"ease"},openBtn:{selector:"",class:"",toggleClass:"",addClass:"animationstart",removeClass:"animationstart"},closeBtn:{selector:"",class:"",toggleClass:"",addClass:"animationstart",removeClass:"animationstart"},overlay:{selector:"",class:"active",bgc:"rgba(0,0,0,.5)",zi:"10",css:"",animationDuration:.5,animationTimigFunc:"ease"},desktop:!1,mediaQuery:"",toTop:!1,toBottom:!1,toLeft:!1,toRight:!1,fade:!1,swipe:!0,swipeThreshold:.3,pageScrolling:!1,scrollingPxs:50,overlayClick:!0,container:!0,esc:!0},n=l.options=c||{},l.defaults)if(void 0===n[a])n[a]=l.defaults[a];else if("string"!=typeof n[a]&&!1!==n[a])for(var d in l.defaults[a])void 0===n[a][d]&&(n[a][d]=l.defaults[a][d]);else"string"==typeof n[a]&&"string"!=typeof l.defaults[a]&&(l.defaults[a].selector=n[a],n[a]=l.defaults[a]);if(""!==n.mediaQuery&&(n.desktop=!0),n.fade&&(n.swipe=!1,n.container=!1),delete l.defaults,l.checkMedia(),window.addEventListener("resize",k(l.checkMedia,100)),m)return m.tag}return _createClass(b,[{key:"checkMedia",value:function(b){n.desktop?""===n.mediaQuery?!b&&l.buildMenu():window.matchMedia(n.mediaQuery).matches?b&&"resize"===b.type?m?!m.actived&&l.restoreEvents():l.buildMenu():l.buildMenu():b&&"resize"===b.type&&l.menu&&m.actived&&l.destroyEvents():/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?b&&"resize"===b.type?m?!m.actived&&l.restoreEvents():l.buildMenu():l.buildMenu():b&&"resize"===b.type&&l.menu&&m.actived&&l.destroyEvents()}},{key:"buildMenu",value:function(){l.init(),l.initOverlay(),l.initMenu()}},{key:"initOverlay",value:function(){l.overlay=function(){var c,d=n.overlay;return!1!==d&&(""===d.selector?(d.isCreated=!0,c=document.createElement("div"),c.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background:".concat(d.bgc,";z-index:").concat(d.zi,";").concat(d.css),l.buildAnimation(d,["fi","fo"],["opacity:0","opacity:1"])):(d.isCreated=!1,c=document.querySelector(d.selector||d)),d.tag=c,c?d:console.warn("You'r overlay is not found!"))}()}},{key:"initMenu",value:function(){l.menu=function(){var c=Math.abs;function a(b){b.class&&(b.toggleClass?m.tag.addEventListener(b.toggleClass,function(){b.tag.classList.toggle(b.class)}):(m.tag.addEventListener("animationstart"===b.addClass?"beforeopen":"open",function(){b.tag.classList.add(b.class)}),m.tag.addEventListener("animationstart"===b.removeClass?"beforeclose":"close",function(){b.tag.classList.remove(b.class)})))}var d=l.findElement(n.menu,"Menu");if(m=d,l.tag=m.tag,a(l.openBtn),l.closeBtn&&a(l.closeBtn),m.tag.open=l.open=m.open=function(){function c(){var b=new CustomEvent("open");m.tag.dispatchEvent(b),m.opened=!0,window.addEventListener("resize",m.close,{once:!0}),n.pageScrolling||window.addEventListener("scroll",m.close),n.esc&&document.addEventListener("keyup",m.close),l.closeBtn&&l.closeBtn.tag.addEventListener("click",m.close),a&&n.overlayClick&&a.tag.addEventListener("click",m.close),m.tag.removeEventListener("animationend",c)}var a=l.overlay,b=m.wrap;m.tag.classList.add(m.class),-1===navigator.userAgent.search(/edge/i)&&m.tag.scrollHeight>m.tag.offsetHeight&&0<m.tag.scrollTop&&m.tag.scrollTo(0,0),m.pageYscroll=pageYOffset,m.width||(m.width=m.tag.offsetWidth),n.fade||(!m.height&&(m.height=m.tag.offsetHeight),b.style.minWidth!=="".concat(m.width,"px")&&(b.style.minWidth="".concat(m.width,"px")),b.style.minHeight!=="".concat(m.height,"px")&&(b.style.minHeight="".concat(m.height,"px"))),n.container&&(m.tag.style.position="relative"),l.setAnimationFor(m,m.animationIn),a&&(a.isCreated?(l.setAnimationFor(a,a.animationIn),e.appendChild(a.tag)):a.tag.classList.add(a.class)),n.container&&(m.parent.appendChild(b),b.appendChild(m.tag),m.contained=!0),l.openBtn.tag.removeEventListener("click",m.open);var d=new CustomEvent("beforeopen");m.tag.dispatchEvent(d),m.tag.addEventListener("animationend",c)},m.tag.close=l.close=m.close=function(){function d(){var b=new CustomEvent("close");m.tag.dispatchEvent(b),l.openBtn.tag.addEventListener("click",m.open),m.opened=!1,m.tag.classList.remove(m.class),m.tag.style.transform="",m.tag.style.willChange="",n.container&&(m.parent.appendChild(m.tag),m.parent.removeChild(m.wrap),m.contained=!1),m.tag.removeEventListener("animationend",d)}var a=l.overlay;if(!(event&&"keyup"===event.type&&27!==event.keyCode)&&!(event&&"scroll"===event.type&&c(m.pageYscroll-pageYOffset)<n.scrollingPxs)){l.setAnimationFor(m,m.animationOut),a&&(a.isCreated?(l.setAnimationFor(a,a.animationOut),a.tag.addEventListener("animationend",j)):a.tag.classList.remove(a.class)),l.closeBtn&&l.closeBtn.tag.removeEventListener("click",m.close),a&&n.overlayClick&&a.tag.removeEventListener("click",m.close),n.swipe&&m.tag.removeEventListener("touchmove",m.swipeMove),n.pageScrolling||window.removeEventListener("scroll",m.close),n.esc&&document.removeEventListener("keyup",m.close),window.removeEventListener("resize",m.close);var b=new CustomEvent("beforeclose");m.tag.dispatchEvent(b),m.tag.addEventListener("animationend",d)}},m.getTransform=function(){return+m.tag.style.transform.replace(/[^0-9-.]*/g,"")},!n.fade){var b,f,g,h,i,o,p,q,r;m.swipeStart=function(){m.tag.style.willChange="transform";var a=event.touches[0]||window.event.touches[0];p=g=+a.clientX.toFixed(),r=i=+a.clientY.toFixed(),m.tag.addEventListener("touchmove",m.swipeMove),m.tag.addEventListener("touchend",function(){return b=f=!1},{once:!0})},m.swipeMove=function(){var a=event.touches[0]||window.event.touches[0];o=i-a.clientY.toFixed(),i=a.clientY.toFixed(),h=g-a.clientX.toFixed(),g=a.clientX.toFixed(),b||f||(9<c(o)?f=!0:5>c(o)&&(b=!0)),b&&n.toLeft&&g>p||n.toRight&&g<p?(m.tag.addEventListener("touchend",m.swipeEnd),m.tag.style.transform="translateX(".concat(m.getTransform()-h,"px)")):(f&&n.toBottom&&m.tag.offsetHeight+m.tag.scrollTop>=m.tag.scrollHeight&&i<r||n.toTop&&0===m.tag.scrollTop&&i>r)&&(event.preventDefault(),m.tag.addEventListener("touchend",m.swipeEnd),m.tag.style.transform="translateY(".concat(m.getTransform()-o,"px)"))},m.swipeEnd=function(){m.tag.removeEventListener("touchend",m.swipeEnd),q=m.getTransform();var b=m.width*n.swipeThreshold;c(q)>=b?m.close():(m.tag.style.transform="translate(0)",m.tag.style.transition="transform ".concat(m.animationDuration,"s"),m.tag.addEventListener("transitionend",function(){return m.tag.style.transition=""},{once:!0}))},n.swipe&&m.tag.addEventListener("touchstart",m.swipeStart)}if(!n.fade){if(!n.toTop&&!n.toBottom&&!n.toLeft&&!n.toRight){var j=window.screen.width,k={left:+l.openBtn.tag.getBoundingClientRect().left.toFixed(),right:+(j-l.openBtn.tag.getBoundingClientRect().right).toFixed()};k.left>k.right?n.toLeft=!0:n.toRight=!0}var s={};s.top=getComputedStyle(m.tag).top,s.bottom=getComputedStyle(m.tag).bottom,s.left=getComputedStyle(m.tag).left,s.right=getComputedStyle(m.tag).right,n.toLeft?(l.buildAnimation(m,["fr","tr"],["translateX(100%)","translateX(0%)"]),m.tag.style.right=0,m.tag.style.left="auto"):n.toRight?(l.buildAnimation(m,["fl","tl"],["translateX(-100%)","translateX(0%)"]),m.tag.style.left=0,m.tag.style.right="auto"):n.toBottom?(m.tag.style.top=0,m.tag.style.bottom="auto",l.buildAnimation(m,["ft","tt"],["translateY(-100%)","translateY(0%)"])):n.toTop&&(l.buildAnimation(m,["fb","tb"],["translateY(100%)","translateY(0%)"]),m.tag.style.bottom=0,m.tag.style.top="auto");var t=m.wrap=document.createElement("div");t.style.cssText="position:absolute;overflow:hidden;",t.style.top="auto"===s.top&&n.toBottom?"0px":s.top,t.style.bottom="auto"===s.bottom&&n.toTop?"0px":s.bottom,t.style.left="auto"===s.left&&n.toRight?"0px":s.left,t.style.right="auto"===s.right&&n.toLeft?"0px":s.right,t.style.zIndex=s.zIndex,m.contained=!1,m.tag.style.top=0,m.tag.style.bottom="auto",m.parent=m.tag.parentElement}else if(!n.menu.animationIn&&!n.menu.animationOut)l.buildAnimation(m,["fi","fo"],["opacity:0","opacity:1"]);else if(!n.menu.animationIn||!n.menu.animationOut)return void console.error("Add another animaion!");return l.restoreEvents(),d}()}},{key:"destroyEvents",value:function(){l.openBtn.tag.removeEventListener("click",m.open),l.closeBtn&&l.closeBtn.tag.removeEventListener("click",m.close),m.actived=!1}},{key:"restoreEvents",value:function(){l.openBtn.tag.addEventListener("click",m.open),m.actived=!0}},{key:"init",value:function(){l.openBtn=function(){var b=l.findElement(n.openBtn,"Open button");return b}(),l.closeBtn=l.findElement(n.closeBtn,"Close button")}},{key:"findElement",value:function(d,a){var b;return""===d.selector?console.warn("".concat(a," selector is empty!")):b=document.querySelector(d.selector),d.tag=b,b?d:console.warn("".concat(a," is not found!"))}},{key:"buildAnimation",value:function(e,a,b){for(var c=["animationIn","animationOut"],d=0;d<a.length;d++)b[d]=b[d].replace(/(translate(.*))/,"transform:$1"),e[c[d]]={name:a[d],key:"@keyframes ".concat(a[d],"{from{").concat(b[d],"}to{").concat(b[1==d?0:1],"}}")}}},{key:"setAnimationFor",value:function(d,b){function c(){b.key&&o.removeChild(e),d.tag.removeEventListener("animationend",c)}var e;b.key&&(e=document.createElement("style"),o.appendChild(e),e.textContent=b===m.animationOut?b.key.replace(/\(.*?\)/,"(".concat(m.getTransform(),")")):b.key),d.tag.style.animation="".concat(b.name," ").concat(d.animationDuration,"s ").concat(d.animationTimigFunc),d.tag.addEventListener("animationend",c)}}]),b}();return a});